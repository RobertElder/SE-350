
D2L.Control.ActionBar=D2L.Control.extend({Construct:function(){arguments.callee.$.Construct.call(this);this.m_isVisible=true},IntegrateControlMin:function(b){arguments.callee.$.IntegrateControlMin.call(this,b);for(var c=0,e=-1,f=b.GetObjectArrayMin(D2L.Control.ActionBarItem),g=0;g<f.length;g++){var h=null;e++;if(this.GetDomNode().firstChild.firstChild.tagName.toLowerCase()=="ul")h=g<this.GetDomNode().firstChild.firstChild.childNodes.length?this.GetDomNode().firstChild.firstChild.childNodes[g].firstChild:
this.GetDomNode().firstChild.childNodes[1].childNodes[g-this.GetDomNode().firstChild.firstChild.childNodes.length].firstChild;else for(var k=this.GetDomNode().firstChild.firstChild.rows[0];c<3;){if(k.cells[c].childNodes.length>0&&e<k.cells[c].firstChild.rows[0].cells.length){h=k.cells[c].firstChild.rows[0].cells[e].firstChild;if(h.className&&h.className.indexOf("dab_i")>-1)break;else h=null}c++;e=0}f[g].IntegrateChild(this,h)}this.UpdateVisibility()},GetItem:function(b){for(var c=0;c<this.Children().length;c++)if(this.Children()[c].GetKey()==
b)return this.Children()[c];return null},Hide:function(){this.SetIsVisible(false)},IsVisible:function(){return this.m_isVisible},SetIsVisible:function(b){this.m_isVisible=b;this.UpdateVisibility()},Show:function(){this.SetIsVisible(true)},UpdateVisibility:function(){if(this.IDomNode){for(var b=false,c=0;c<this.Children().length;c++)if(this.Children()[c].IsVisible()){b=true;break}if(!b||!this.IsVisible())this.IDomNode.style.display="none";else if(b&&this.IsVisible())this.IDomNode.style.display="block"}}});
D2L.Control.ActionBarItem=D2L.Control.extend({Construct:function(){arguments.callee.$.Construct.call(this);this.m_isVisible=true;this.m_text=this.m_key="";this.m_navInfo=this.m_anchor=this.m_domText=this.m_domImg=null;this.m_hasLink=false},DeserializeMin:function(b){this.m_key=b.GetMember();this.m_text=b.GetMember();this.m_isVisible=b.GetBoolean();this.m_hasLink=b.GetBoolean()},IntegrateChild:function(b,c){arguments.callee.$.IntegrateChild.call(this,b,c);this.m_domImg=this.IDomNode.firstChild.childNodes[0];
this.m_domText=this.IDomNode.firstChild.childNodes[1];this.m_separator=this.IDomNode.parentNode;this.m_anchor=this.IDomNode.firstChild;this.m_hasLink&&this.InstallEvents()},InstallEvents:function(){var b=this,c=false;this.AttachObject(this.m_anchor,"onfocus",function(){if(!c)b.m_anchor.className="dab_o"});this.AttachObject(this.m_anchor,"onmouseover",function(){if(!c)b.m_anchor.className="dab_o"});this.AttachObject(this.m_anchor,"onmouseout",function(){c=false;b.m_anchor.className=""});this.AttachObject(this.m_anchor,
"onblur",function(){b.m_anchor.className=""});this.AttachObject(this.m_anchor,"onmousedown",function(){c=true;b.m_anchor.className="dab_d"});this.AttachObject(this.m_anchor,"onmouseup",function(){c=false;b.m_anchor.className=""})},GetKey:function(){return this.m_key},GetText:function(){return this.m_text},Hide:function(){this.SetIsVisible(false)},IsVisible:function(){return this.m_isVisible},SetDescription:function(b){b=D2L.LP.Text.IText.Normalize(b,"D2L.Control.ActionBarItem","SetDescription","description");
this.m_anchor&&b.AssignText(this.m_anchor,"title")},SetImage:function(b){this.m_domImg&&b.Assign(this.m_domImg)},SetIsVisible:function(b){if(this.IDomNode)this.IDomNode.style.display=b?"inline":"none";this.m_isVisible=b;b=null;if(this.Parent())for(var c=0;c<this.Parent().Children().length;c++){var e=this.Parent().Children()[c];if(b===null&&e.IsVisible()){b=e;e.IDomNode.className="dab_i"}else e.IDomNode.className=e.IsVisible()?"dab_i dab_s":"dab_i"}this.Parent()&&this.Parent().UpdateVisibility()},
SetOnClick:function(b){UI.GetMessageArea().AddWarningMessage(new D2L.LP.Text.PlainText("ActionBarItem.SetOnClick() is obsolete. Please use SetNav() instead."),true);if(b){if(this.m_navInfo==null)this.m_navInfo=new D2L.NavInfo;this.m_navInfo.SetOnClick(b);this.SetNav(this.m_navInfo)}},SetNav:function(b){if(b){this.m_navInfo=b;if(!this.m_hasLink){this.InstallEvents();this.m_hasLink=true}var c=this.m_navInfo.SetupHrefOnClick(this);this.m_anchor.href=c.Href;if(c.Target==null||c.Target=="")this.m_anchor.attributes.getNamedItem("target")&&
this.m_anchor.attributes.removeNamedItem("target");else this.m_anchor.target=c.Target;b=this;if(c.OnClick){b=this;this.AttachObject(this.m_anchor,"onclick",function(){if(c.OnClick)return c.OnClick.call()})}}},SetText:function(b){this.m_text=D2L.LP.Text.IText.Normalize(b,"D2L.Control.ActionBarItem","SetText","text");if(this.m_domText){if(this.m_domText.firstChild){D2L.Util.Dom.Purge(this.m_domText.firstChild);this.m_domText.removeChild(this.m_domText.firstChild)}this.m_domText.appendChild(this.CreateTextNode(this.m_text))}},
Show:function(){this.SetIsVisible(true)}});D2L.ActionBar=D2L.Control.ActionBar;D2L.ActionBarItem=D2L.Control.ActionBarItem;window.D2L!==undefined&&D2L.LP.Web.Packaging!==undefined&&D2L.LP.Web.Packaging.Register("D2L.LP.Web.Controls.ActionBar");
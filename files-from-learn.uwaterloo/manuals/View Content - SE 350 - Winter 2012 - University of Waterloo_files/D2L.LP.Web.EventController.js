D2L.Events={};
D2L.Events.Event=D2L.Class.extend({Construct:function(){arguments.callee.$.Construct.call(this);this.Handlers=[]},Raise:function(){for(var b=0;b<this.Handlers.length;b++)if(!this.Handlers[b].Remove)if(this.Handlers[b].Callback){for(var c=this.Handlers[b].Window.UI.CreateArray(),e=0;e<arguments.length;e++)c.push(arguments[e]);this.Handlers[b].Callback.apply(this.Handlers[b].Callback,c)}else this.Handlers[b].Remove=true;this.UnregisterHandlers()},UnregisterHandlers:function(){this.Handlers.sort(function(c,
e){return c.Remove&&e.Remove?0:!c.Remove&&!e.Remove?0:c.Remove&&!e.Remove?1:-1});for(var b=this.Handlers.length-1;b>=0;b--)this.Handlers[b].Remove&&this.Handlers.pop()},Unregister:function(b){for(var c=0;c<this.Handlers.length;c++)if(this.Handlers[c].Window==b)this.Handlers[c].Remove=true},Register:function(b,c){b&&b[c]&&this.Handlers.push({Window:b,Callback:b[c],Remove:false})}});
D2L.Events.EventController=D2L.Class.extend({Construct:function(){arguments.callee.$.Construct.call(this,true);this.m_windows=[]},Dispose:function(){arguments.callee.$.Dispose.call(this);for(var b=0;b<this.m_windows.length;b++)try{this.m_windows[b].Events=undefined}catch(c){}},CreateEvent:function(b){this[b]=new D2L.Events.Event(b)},RegisterEventCallback:function(b,c,e){if(this[b]){this[b].Register(c,e);c!=window&&this.m_windows.push(c)}},UnregisterEvent:function(b,c){this[b]&&this[b].Unregister(c)}});
window.D2L!==undefined&&D2L.LP.Web.Packaging!==undefined&&D2L.LP.Web.Packaging.Register("D2L.LP.Web.EventController");